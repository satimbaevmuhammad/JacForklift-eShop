// lib/i18n.js
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

// Language configuration
export const languages = {
    uz: { code: 'uz', name: "O'zbekcha", flag: 'üá∫üáø' },
    ru: { code: 'ru', name: '–†—É—Å—Å–∫–∏–π', flag: 'üá∑üá∫' },
    en: { code: 'en', name: 'English', flag: 'üá∫üá∏' }
};

// Translation resources
const resources = {
    uz: {
        translation: {
            // Categories
            "Dizelli transportlar": "Dizelli transportlar",
            "Elektri transportlar": "Elektri transportlar",
            "Benzinli transportlar": "Benzinli transportlar",
            "LPG transportlari": "LPG transportlari",
            "Elektr pallet yuk mashinasi": "Elektr pallet yuk mashinasi",
            "Elektr stacker mashinaslari": "Elektr stacker mashinaslari",
            "Reach truck forklift": "Reach truck forklift",
            "Handle pallet forklift": "Handle pallet forklift",
            "Texnika extiyot qismlarin": "Texnika extiyot qismlarin",

            // Common
            "categories": "Kategoriyalar",
            "heroTitle": "Yuqori Sifatli Ko'tarish Uskunalari",
            "heroDescription": "Professional xizmat va yuqori sifat kafolati bilan premium sifatli ko'tarish uskunalari.",
            "products": "Mahsulotlar",
            "searchPlaceholder": "Forkliftlarni qidiring...",
            "searchPlaceholderMobile": "Qidirish...",
            "searching": "Qidirilmoqda...",
            "available": "Mavjud",
            "noResults": "Bu kategoriyada mahsulotlar topilmadi",
            "tryOtherKeywords": "Tez orada yangi mahsulotlar qo'shiladi",
            "moreResults": "Yana",
            "resultsCount": "ta natija",
            "seeAllResults": "Barcha natijalarni ko'rish",
            "phone": "+998 94 987 60 00",
            "call": "Qo'ng'iroq qilish",
            "contact": "Bog'lanish",
            "home": "Bosh sahifa",
            "about": "Biz haqimizda",
            "services": "Xizmatlar",
            "gallery": "Galereya",
            "news": "Yangiliklar",
            "catalog": "Katalog",
            "rent": "Ijaraga berish",
            "sale": "Sotish",
            "maintenance": "Texnik xizmat",
            "spare_parts": "Ehtiyot qismlar",
            "consultation": "Konsultatsiya",
            "free_consultation": "Bepul konsultatsiya",
            "order": "Buyurtma berish",
            "more_info": "Batafsil ma'lumot",
            "specifications": "Texnik xususiyatlar",
            "capacity": "Yuk ko'tarish qobiliyati",
            "weight": "Og'irlik",
            "height": "Balandlik",
            "length": "Uzunlik",
            "width": "Kenglik",
            "engine": "Dvigatel",
            "fuel": "Yoqilg'i",
            "speed": "Tezlik",
            "year": "Yil",
            "condition": "Holati",
            "new": "Yangi",
            "used": "Ishlatilgan",
            "excellent": "A'lo",
            "good": "Yaxshi",
            "price": "Narx",
            "currency": "so'm",
            "per_day": "kuniga",
            "per_month": "oyiga",
            "contact_us": "Biz bilan bog'laning",
            "get_quote": "Narx so'rash",
            "view_details": "Batafsil ko'rish",
            "back": "Orqaga",
            "loading": "Yuklanmoqda...",
            "error": "Xatolik",
            "retry": "Qayta urinish",
            "open_menu": "Menyuni ochish",
            "loading_product": "Mahsulot yuklanmoqda...",
            "product_not_found": "Mahsulot topilmadi",
            "description": "Tavsif",
            "features": "Xususiyatlari",
            "model": "Model",
            "place_order": "Buyurtma berish",
            "request_info": "Ma'lumot so'rash",
            "related_products": "O'xshash mahsulotlar",
            "api_error_fallback": "API dan ma'lumot olishda xatolik, mahalliy ma'lumotlar ko'rsatilmoqda",
            "ton": "tonna",

            // Footer tarjimalari
            "footer": {
                "copyright": "JAC Forklift ¬© 2024. Barcha huquqlar himoyalangan",
                "social": {
                    "telegram": "Telegram kanalimiz",
                    "instagram": "Instagram sahifamiz",
                    "youtube": "YouTube kanalimiz",
                    "facebook": "Facebook sahifamiz"
                }
            },

            // Product details
            "product": {
                "defaultName": "Forklift",
                "loading": "Mahsulot yuklanmoqda...",
                "model": "Model",
                "price": "Narx",
                "description": "Tavsif",
                "specifications": "Texnik xususiyatlar",
                "features": "Xususiyatlar",
                "relatedProducts": "O'xshash mahsulotlar",
                "actions": {
                    "placeOrder": "Buyurtma berish",
                    "requestInfo": "Ma'lumot so'rash"
                },
                "errors": {
                    "loadFailed": "Mahsulotni yuklashda xatolik",
                    "notFound": "Mahsulot topilmadi"
                },
                "specs": {
                    "capacity_kg": "Yuk ko'tarish qobiliyati",
                    "lift_height": "Ko'tarish balandligi",
                    "fuel_type": "Yoqilg'i turi",
                    "engine_power": "Dvigatel quvvati",
                    "weight": "Og'irlik",
                    "length": "Uzunlik",
                    "width": "Kenglik",
                    "height": "Balandlik"
                }
            },

            // Common actions
            "common": {
                "back": "Orqaga",
                "retry": "Qayta urinish",
                "loading": "Yuklanmoqda...",
                "error": "Xatolik",
                "success": "Muvaffaqiyatli"
            }
        }
    },
    ru: {
        translation: {
            // Categories
            "Dizelli transportlar": "–î–∏–∑–µ–ª—å–Ω—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞",
            "Elektri transportlar": "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞",
            "Benzinli transportlar": "–ë–µ–Ω–∑–∏–Ω–æ–≤—ã–µ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞",
            "LPG transportlari": "–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç –Ω–∞ LPG",
            "Elektr pallet yuk mashinasi": "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ –ø–∞–ª–ª–µ—Ç–Ω—ã–µ –ø–æ–≥—Ä—É–∑—á–∏–∫–∏",
            "Elektr stacker mashinaslari": "–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —à—Ç–∞–±–µ–ª–µ—Ä—ã",
            "Reach truck forklift": "–†–∏—á—Ç—Ä–∞–∫ –ø–æ–≥—Ä—É–∑—á–∏–∫–∏",
            "Handle pallet forklift": "–†—É—á–Ω—ã–µ –ø–∞–ª–ª–µ—Ç–Ω—ã–µ —Ç–µ–ª–µ–∂–∫–∏",
            "Texnika extiyot qismlarin": "–ó–∞–ø—á–∞—Å—Ç–∏ –¥–ª—è —Ç–µ—Ö–Ω–∏–∫–∏",

            // Common
            "categories": "–ö–∞—Ç–µ–≥–æ—Ä–∏–∏",
            "heroTitle": "–í—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –ø–æ–¥—ä—ë–º–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ",
            "heroDescription": "–ü–æ–¥—ä—ë–º–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ –ø—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å–∞ —Å –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–º —Å–µ—Ä–≤–∏—Å–æ–º –∏ –≥–∞—Ä–∞–Ω—Ç–∏–µ–π –≤—ã—Å–æ–∫–æ–≥–æ –∫–∞—á–µ—Å—Ç–≤–∞.",
            "products": "–¢–æ–≤–∞—Ä—ã",
            "searchPlaceholder": "–ü–æ–∏—Å–∫ –ø–æ–≥—Ä—É–∑—á–∏–∫–æ–≤...",
            "searchPlaceholderMobile": "–ü–æ–∏—Å–∫...",
            "searching": "–ü–æ–∏—Å–∫...",
            "available": "–î–æ—Å—Ç—É–ø–Ω–æ",
            "noResults": "–í —ç—Ç–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–æ–≤–∞—Ä—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã",
            "tryOtherKeywords": "–°–∫–æ—Ä–æ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã",
            "moreResults": "–ï—â–µ",
            "resultsCount": "—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤",
            "seeAllResults": "–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã",
            "phone": "+998 94 987 60 00",
            "call": "–ü–æ–∑–≤–æ–Ω–∏—Ç—å",
            "contact": "–ö–æ–Ω—Ç–∞–∫—Ç",
            "home": "–ì–ª–∞–≤–Ω–∞—è",
            "about": "–û –Ω–∞—Å",
            "services": "–£—Å–ª—É–≥–∏",
            "gallery": "–ì–∞–ª–µ—Ä–µ—è",
            "news": "–ù–æ–≤–æ—Å—Ç–∏",
            "catalog": "–ö–∞—Ç–∞–ª–æ–≥",
            "rent": "–ê—Ä–µ–Ω–¥–∞",
            "sale": "–ü—Ä–æ–¥–∞–∂–∞",
            "maintenance": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ",
            "spare_parts": "–ó–∞–ø—á–∞—Å—Ç–∏",
            "consultation": "–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",
            "free_consultation": "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è",
            "order": "–ó–∞–∫–∞–∑–∞—Ç—å",
            "more_info": "–ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è",
            "specifications": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏",
            "capacity": "–ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å",
            "weight": "–í–µ—Å",
            "height": "–í—ã—Å–æ—Ç–∞",
            "length": "–î–ª–∏–Ω–∞",
            "width": "–®–∏—Ä–∏–Ω–∞",
            "engine": "–î–≤–∏–≥–∞—Ç–µ–ª—å",
            "fuel": "–¢–æ–ø–ª–∏–≤–æ",
            "speed": "–°–∫–æ—Ä–æ—Å—Ç—å",
            "year": "–ì–æ–¥",
            "condition": "–°–æ—Å—Ç–æ—è–Ω–∏–µ",
            "new": "–ù–æ–≤—ã–π",
            "used": "–ë/–£",
            "excellent": "–û—Ç–ª–∏—á–Ω–æ–µ",
            "good": "–•–æ—Ä–æ—à–µ–µ",
            "price": "–¶–µ–Ω–∞",
            "currency": "—Å—É–º",
            "per_day": "–≤ –¥–µ–Ω—å",
            "per_month": "–≤ –º–µ—Å—è—Ü",
            "contact_us": "–°–≤—è–∂–∏—Ç–µ—Å—å —Å –Ω–∞–º–∏",
            "get_quote": "–ó–∞–ø—Ä–æ—Å–∏—Ç—å —Ü–µ–Ω—É",
            "view_details": "–ü–æ–¥—Ä–æ–±–Ω–µ–µ",
            "back": "–ù–∞–∑–∞–¥",
            "loading": "–ó–∞–≥—Ä—É–∑–∫–∞...",
            "error": "–û—à–∏–±–∫–∞",
            "retry": "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å",
            "open_menu": "–û—Ç–∫—Ä—ã—Ç—å –º–µ–Ω—é",
            "loading_product": "–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞...",
            "product_not_found": "–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω",
            "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
            "features": "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏",
            "model": "–ú–æ–¥–µ–ª—å",
            "place_order": "–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑",
            "request_info": "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é",
            "related_products": "–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã",
            "api_error_fallback": "–û—à–∏–±–∫–∞ –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ API, –ø–æ–∫–∞–∑–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ",
            "ton": "—Ç–æ–Ω–Ω",

            // Footer tarjimalari
            "footer": {
                "copyright": "JAC Forklift ¬© 2024. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã",
                "social": {
                    "telegram": "–ù–∞—à Telegram –∫–∞–Ω–∞–ª",
                    "instagram": "–ù–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Instagram",
                    "youtube": "–ù–∞—à YouTube –∫–∞–Ω–∞–ª",
                    "facebook": "–ù–∞—à–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ Facebook"
                }
            },

            // Product details
            "product": {
                "defaultName": "–ü–æ–≥—Ä—É–∑—á–∏–∫",
                "loading": "–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–∞...",
                "model": "–ú–æ–¥–µ–ª—å",
                "price": "–¶–µ–Ω–∞",
                "description": "–û–ø–∏—Å–∞–Ω–∏–µ",
                "specifications": "–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏",
                "features": "–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏",
                "relatedProducts": "–ü–æ—Ö–æ–∂–∏–µ —Ç–æ–≤–∞—Ä—ã",
                "actions": {
                    "placeOrder": "–°–¥–µ–ª–∞—Ç—å –∑–∞–∫–∞–∑",
                    "requestInfo": "–ó–∞–ø—Ä–æ—Å–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"
                },
                "errors": {
                    "loadFailed": "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Ç–æ–≤–∞—Ä–∞",
                    "notFound": "–¢–æ–≤–∞—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"
                },
                "specs": {
                    "capacity_kg": "–ì—Ä—É–∑–æ–ø–æ–¥—ä–µ–º–Ω–æ—Å—Ç—å",
                    "lift_height": "–í—ã—Å–æ—Ç–∞ –ø–æ–¥—ä–µ–º–∞",
                    "fuel_type": "–¢–∏–ø —Ç–æ–ø–ª–∏–≤–∞",
                    "engine_power": "–ú–æ—â–Ω–æ—Å—Ç—å –¥–≤–∏–≥–∞—Ç–µ–ª—è",
                    "weight": "–í–µ—Å",
                    "length": "–î–ª–∏–Ω–∞",
                    "width": "–®–∏—Ä–∏–Ω–∞",
                    "height": "–í—ã—Å–æ—Ç–∞"
                }
            },

            // Common actions
            "common": {
                "back": "–ù–∞–∑–∞–¥",
                "retry": "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å",
                "loading": "–ó–∞–≥—Ä—É–∑–∫–∞...",
                "error": "–û—à–∏–±–∫–∞",
                "success": "–£—Å–ø–µ—à–Ω–æ"
            }
        }
    },
    en: {
        translation: {
            // Categories
            "Dizelli transportlar": "Diesel Vehicles",
            "Elektri transportlar": "Electric Vehicles",
            "Benzinli transportlar": "Petrol Vehicles",
            "LPG transportlari": "LPG Vehicles",
            "Elektr pallet yuk mashinasi": "Electric Pallet Trucks",
            "Elektr stacker mashinaslari": "Electric Stackers",
            "Reach truck forklift": "Reach Truck Forklifts",
            "Handle pallet forklift": "Manual Pallet Trucks",
            "Texnika extiyot qismlarin": "Machinery Spare Parts",

            // Common
            "categories": "Categories",
            "heroTitle": "High Quality Lifting Equipment",
            "heroDescription": "Premium quality lifting equipment with professional service and high quality guarantee.",
            "products": "Products",
            "searchPlaceholder": "Search forklifts...",
            "searchPlaceholderMobile": "Search...",
            "searching": "Searching...",
            "available": "Available",
            "noResults": "No products found in this category",
            "tryOtherKeywords": "New products will be added soon",
            "moreResults": "More",
            "resultsCount": "results",
            "seeAllResults": "See all results",
            "phone": "+998 94 987 60 00",
            "call": "Call",
            "contact": "Contact",
            "home": "Home",
            "about": "About Us",
            "services": "Services",
            "gallery": "Gallery",
            "news": "News",
            "catalog": "Catalog",
            "rent": "Rent",
            "sale": "Sale",
            "maintenance": "Maintenance",
            "spare_parts": "Spare Parts",
            "consultation": "Consultation",
            "free_consultation": "Free Consultation",
            "order": "Order",
            "more_info": "More Information",
            "specifications": "Specifications",
            "capacity": "Load Capacity",
            "weight": "Weight",
            "height": "Height",
            "length": "Length",
            "width": "Width",
            "engine": "Engine",
            "fuel": "Fuel",
            "speed": "Speed",
            "year": "Year",
            "condition": "Condition",
            "new": "New",
            "used": "Used",
            "excellent": "Excellent",
            "good": "Good",
            "price": "Price",
            "currency": "UZS",
            "per_day": "per day",
            "per_month": "per month",
            "contact_us": "Contact Us",
            "get_quote": "Get Quote",
            "view_details": "View Details",
            "back": "Back",
            "loading": "Loading...",
            "error": "Error",
            "retry": "Retry",
            "open_menu": "Open menu",
            "loading_product": "Loading product...",
            "product_not_found": "Product not found",
            "description": "Description",
            "features": "Features",
            "model": "Model",
            "place_order": "Place Order",
            "request_info": "Request Information",
            "related_products": "Related Products",
            "api_error_fallback": "API data fetch error, showing local data",
            "ton": "ton",

            // Footer tarjimalari  
            "footer": {
                "copyright": "JAC Forklift ¬© 2024. All rights reserved",
                "social": {
                    "telegram": "Our Telegram channel",
                    "instagram": "Our Instagram page",
                    "youtube": "Our YouTube channel",
                    "facebook": "Our Facebook page"
                }
            },

            // Product details
            "product": {
                "defaultName": "Forklift",
                "loading": "Loading product...",
                "model": "Model",
                "price": "Price",
                "description": "Description",
                "specifications": "Specifications",
                "features": "Features",
                "relatedProducts": "Related Products",
                "actions": {
                    "placeOrder": "Place Order",
                    "requestInfo": "Request Information"
                },
                "errors": {
                    "loadFailed": "Failed to load product",
                    "notFound": "Product not found"
                },
                "specs": {
                    "capacity_kg": "Load Capacity",
                    "lift_height": "Lift Height",
                    "fuel_type": "Fuel Type",
                    "engine_power": "Engine Power",
                    "weight": "Weight",
                    "length": "Length",
                    "width": "Width",
                    "height": "Height"
                }
            },

            // Common actions
            "common": {
                "back": "Back",
                "retry": "Retry",
                "loading": "Loading...",
                "error": "Error",
                "success": "Success"
            }
        }
    }
};

// Get saved language from localStorage
const getSavedLanguage = () => {
    if (typeof window !== 'undefined') {
        return localStorage.getItem('language') || 'uz';
    }
    return 'uz';
};

// Initialize i18n
i18n
    .use(initReactI18next)
    .init({
        resources,
        lng: getSavedLanguage(),
        fallbackLng: 'uz',
        interpolation: {
            escapeValue: false
        },
        react: {
            useSuspense: false
        }
    });

// Language change function with localStorage sync
export const changeLanguage = (langCode) => {
    if (languages[langCode]) {
        i18n.changeLanguage(langCode);
        if (typeof window !== 'undefined') {
            localStorage.setItem('language', langCode);
            // Trigger storage event for other tabs
            window.dispatchEvent(new StorageEvent('storage', {
                key: 'language',
                newValue: langCode
            }));
        }
    }
};

export default i18n;